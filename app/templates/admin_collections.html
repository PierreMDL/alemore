{% extends "layout.html" %}

{% block titre -%}<title>Administration - Collections</title>{%- endblock titre %}

{% block contenu -%}
<div class="w3-content">
  {%- for étiquette in étiquettes %}
  <div class="w3-panel w3-black w3-opacity-max w3-padding-small">
    <div>
      <button onclick="dropTab(this, ['&#9654;','&#9660;'], 'tab_{{ étiquette.id }}');">&#9654;</button>
      <span>{{ étiquette.titre }}</span>
    </div>
    <div id="tab_{{ étiquette.id }}" class="w3-hide w3-row">
      <form action="{{ url_for('admin_collections') }}" method="POST" class="w3-threequarter w3-padding-small" autocomplete="off">
        <input type="text" name="titre" value="{{ étiquette.titre }}" required><br>
        <textarea name="description" class="w3-block" rows="6">
        {{- étiquette.description|join('\n')-}}
        </textarea>
        <input type="hidden" name="id_collection" value="{{ étiquette.id }}">
        <input type="submit" name="action" value="Mettre à jour">
        <input type="submit" name="action" value="Supprimer" class="w3-right">
      </form>
      <div class="w3-quarter w3-padding-small">
        <a href="{{ url_for('admin_tableaux', id_collection=étiquette.id) }}">
          <img src="{{ étiquette.src }}" alt="{{ étiquette.titre.strip() }}" class="w3-right" style="object-fit:cover; width:200px; height:200px; z-index:999; top:0;">
        </a>
      </div>
    </div>
  </div>
  {%- endfor %}
  <div class="w3-panel w3-black w3-opacity-max w3-padding-small">
    <div>
      <button onclick="dropTab(this, ['&plus;', '&plus;'], 'new_tab');">&plus;</button>
      <span>Ajouter une collection</span>
    </div>
    <div id="new_tab" class="w3-hide w3-row">
      <form action="{{ url_for('admin_collections') }}" method="POST" class="w3-threequarter w3-padding-small" autocomplete="off">
        <input type="text" name="titre" value="" required><br>
        <textarea name="description" class="w3-block" rows="6"></textarea>
        <input type="submit" name="action" value="Ajouter">
      </form>
    </div>
  </div>
</div>
<script>
  function dropTab(bouton, symboles, id_tableau) {
    let tab = document.getElementById(id_tableau);
    if (tab.classList.contains('w3-hide')) {
      bouton.innerHTML = symboles[1];
      tab.classList.replace('w3-hide', 'w3-show');
    } else {
      bouton.innerHTML = symboles[0];
      tab.classList.replace('w3-show', 'w3-hide');
    }
  };
</script>
{% endblock contenu %}